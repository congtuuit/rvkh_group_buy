(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923,427],{1863:function(e,t,a){Promise.resolve().then(a.bind(a,8752))},5218:function(e,t,a){"use strict";let r=a(8472).Z.create({baseURL:"https://reviewkhoahoc.net",timeout:1e4,headers:{"Content-Type":"application/json"}});t.Z=r},831:function(e,t,a){"use strict";a.d(t,{CH:function(){return s},Id:function(){return i},Pk:function(){return l},t8:function(){return o},zZ:function(){return n}});var r=a(5218);let n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await r.Z.get("/wp-json/tutor-helper/v1/courses",{params:{...e}})).data}catch(e){throw console.error("API call error:",e),e}},s=async e=>{try{return(await r.Z.get("/wp-json/tutor-helper/v1/get-course?id=".concat(e))).data}catch(e){throw console.error("API call error:",e),e}},l=async e=>{try{return(await r.Z.post("/wp-json/tutor-helper/v1/create-course",e)).data}catch(e){throw console.error("API call error:",e),e}},o=async e=>{try{return(await r.Z.post("/wp-json/tutor-helper/v1/update-course",e)).data}catch(e){throw console.error("API call error:",e),e}},i=async e=>{try{return(await r.Z.post("/wp-json/tutor-helper/v1/delete-course",{id:e})).data}catch(e){throw console.error("API call error:",e),e}}},8752:function(e,t,a){"use strict";var r=a(7437),n=a(2265),s=a(8206),l=a(6022),o=a(8043),i=a(2354),c=a(2671),u=a(7774),p=a(602),h=a(8127),d=a(5956),_=a(6463),g=a(831),m=a(7821);let v={GROUPING:"171",GROUPED:"106"},b={post_author:1,post_title:"DEV_TEST",post_content:"DEV_TEST",post_status:"draft",course_level:"beginner",tutor_course_group_buy_url:"google.com",course_categories:v.GROUPING,course_tags:[],pricing:{type:"paid",price:"18000",regular_price:"199999",sale_price:"18000"}},y=e=>{let{label:t,name:a,value:n,onChange:s}=e;return(0,r.jsx)(l.Y,{inputMode:"numeric",label:t,name:a,value:n,onChange:s,variant:"",className:"mb-3"})},x=e=>{let{disabled:t=!1,label:a,name:n,value:s,onChange:o}=e;return(0,r.jsx)(l.Y,{disabled:t,label:a,name:n,value:s,onChange:o,variant:"",className:"mb-3"})},f=e=>{let{label:t,name:a,value:n,onChange:s}=e;return(0,r.jsx)(o.Y,{label:t,name:a,value:n,onChange:s,variant:"",className:"mb-3"})},j=e=>{let{label:t,name:a,value:n,onChange:s,options:l}=e;return(0,r.jsx)(p.g,{label:t,name:a,value:n,onChange:e=>s(a,e),className:"mb-3",defaultSelectedKeys:["draft"],children:l.map(e=>(0,r.jsx)(h.R,{value:e.value,children:e.label},e.value))})};t.default=function(){let e=(0,_.useRouter)(),[t,a]=(0,n.useState)(b),[l,o]=(0,n.useState)(!1),p=(0,_.useSearchParams)().get("id"),h=!!p;(0,n.useEffect)(()=>{h&&w(p)},[h]),(0,n.useEffect)(()=>{G.setValues(t)},[t]);let w=async e=>{let{success:t,data:r}=await (0,g.CH)(e);if(t){var n;let e=null==r?void 0:null===(n=r.categories)||void 0===n?void 0:n.filter(e=>e.term_taxonomy_id==v.GROUPING||e.term_taxonomy_id==v.GROUPED).map(e=>e.term_taxonomy_id.toString());a({id:r.id,post_author:1,post_title:r.title,post_content:r.content,post_status:r.status,tutor_course_group_buy_url:r.tutor_course_group_buy_url,course_categories:e.length>0?e[e.length-1]:v.GROUPING,pricing:{type:"paid",price:r.price,regular_price:r.regular_price,sale_price:r.sale_price}})}},C=()=>{e.back()},N=async e=>{let t={...e,course_categories:[e.course_categories]},a=d.Am.loading("Vui l\xf2ng chờ..."),{success:r,message:n}=await (0,g.Pk)(t);d.Am.update(a,{render:r?"Tạo b\xe0i viết th\xe0nh c\xf4ng.":n||"C\xf3 lỗi xảy ra.",type:r?"success":"error",isLoading:!1,autoClose:2e3}),o(!1)},k=async e=>{let t={...e,course_categories:[e.course_categories]},a=d.Am.loading("Vui l\xf2ng chờ..."),{success:r,message:n}=await (0,g.t8)(t);d.Am.update(a,{render:r?"Cập nhật b\xe0i viết th\xe0nh c\xf4ng.":n||"C\xf3 lỗi xảy ra.",type:r?"success":"error",isLoading:!1,autoClose:2e3}),o(!1)},P=async e=>{o(!0),h?await k(e):await N(e)},G=(0,m.TA)({});return(0,r.jsx)(i.w,{className:"p-5",children:(0,r.jsx)(m.J9,{initialValues:t,onSubmit:P,enableReinitialize:!0,innerRef:G,children:e=>{let{handleChange:t,values:a,handleSubmit:n}=e;return(0,r.jsxs)("div",{style:{display:"block"},children:[(0,r.jsx)("div",{className:"w-full",style:{display:"inline-block"},children:(0,r.jsxs)("div",{className:"flex float-right mb-3",children:[(0,r.jsx)(s.A,{radius:"sm",color:"default",onClick:C,children:"Trở về"}),(0,r.jsx)(s.A,{isLoading:l,radius:"sm",color:"primary",type:"submit",className:"ml-2",onPress:n,children:h?"Cập nhật":"Tạo mới"})]})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"mb-5",children:(0,r.jsxs)(c.X,{name:"course_categories",label:"Loại kh\xf3a học",orientation:"horizontal",onChange:t,value:a.course_categories,children:[(0,r.jsx)(u.J,{value:"171",children:"Đang Group Buy"}),(0,r.jsx)(u.J,{value:"106",children:"Group Buy"})]})}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("div",{className:"flex-1 pr-3",children:[(0,r.jsx)(x,{disabled:!0,label:"M\xe3 kh\xf3a học",name:"id",value:a.id}),(0,r.jsx)(x,{label:"T\xean kh\xf3a học",name:"post_title",value:a.post_title,onChange:t}),(0,r.jsx)(x,{label:"Link nh\xf3m",name:"tutor_course_group_buy_url",value:a.tutor_course_group_buy_url,onChange:t}),(0,r.jsx)(f,{label:"Nội dung kh\xf3a học",name:"post_content",value:a.post_content,onChange:t})]}),(0,r.jsxs)("div",{className:"flex-1 pl-3",children:[(0,r.jsx)(j,{label:"Trạng th\xe1i",name:"post_status",value:a.post_status,onChange:(e,a)=>{t(a)},options:[{value:"publish",label:"C\xf4ng khai"},{value:"draft",label:"Nh\xe1p"}]}),(0,r.jsx)(y,{label:"Gi\xe1 kh\xf3a học",name:"pricing.price",value:a.pricing.price,onChange:t}),(0,r.jsx)(y,{label:"Gi\xe1 gốc",name:"pricing.regular_price",value:a.pricing.regular_price,onChange:t}),(0,r.jsx)(y,{label:"Gi\xe1 khuyến m\xe3i",name:"pricing.sale_price",value:a.pricing.sale_price,onChange:t})]})]})]})]})}})})}}},function(e){e.O(0,[176,184,746,22,211,822,443,300,572,821,249,971,23,744],function(){return e(e.s=1863)}),_N_E=e.O()}]);